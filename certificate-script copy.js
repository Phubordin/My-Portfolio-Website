// ‡∏™‡∏°‡∏°‡∏∏‡∏ï‡∏¥‡∏ß‡πà‡∏≤ certificates ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏û
const certificates = [
    {
        id: 1,
        image: "mac.webp",
        title: "Data Science Bootcamp",
        school: "DataRockie",
        schoolLink: "https://bootcamp.datarockie.com/",
        description: "Comprehensive data science and analytics training",
        notionLink: "https://notion.so/your-notes-1",
        cost: "‡∏ø4,000 ($999)",
        costlink: "https://www.google.com",
        certificateLink: "https://verify.datarockie.com/cert/123"
    },
    {
        id: 2,
        image: "certificate-Intro-to-data-science-skoodio.webp",
        title: "SQL Mastery",
        school: "Skooldio",
        schoolLink: "https://www.skooldio.com/",
        description: "Advanced database management and SQL queries",
        notionLink: "https://notion.so/your-notes-2",
        cost: "‡∏ø40,000 ($999)",
        costlink: "https://www.google.com",
        certificateLink: "https://verify.w3schools.com/cert/456"
    },
    {
        id: 3,
        image: "cetificate-dsb10-datarockie.webp",
        title: "SQL Masterys",
        school: "W3Schools",
        schoolLink: "https://www.w3schools.com/",
        description: "Advanced database management and SQL queries",
        notionLink: "https://notion.so/your-notes-2",
        cost: "‡∏ø40,000 ‡∏ö‡∏≤‡∏ó ($999)",
        costlink: "https://www.google.com",
        certificateLink: "https://verify.w3schools.com/cert/456"
    },
    {
        id: 4,
        image: "cetificate-dsb10-datarockie.webp",
        title: "SQL Masterys",
        school: "W3Schools",
        schoolLink: "https://www.w3schools.com/",
        description: "Advanced database management and SQL queries",
        notionLink: "https://notion.so/your-notes-2",
        cost: "‡∏ø40,000 ‡∏ö‡∏≤‡∏ó ($999)",
        costlink: "https://www.google.com",
        certificateLink: "https://verify.w3schools.com/cert/456"
    },
];

// Global variables
let currentView = 'gallery';
let selectedSchool = 'all';
let currentIndex = 0;  // ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ slideshow index
let nextViewText = 'Switch to Slideshow View'; // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

// Initialize the page
document.addEventListener("DOMContentLoaded", function () {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö list view ‡∏´‡∏≤‡∏Å‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
    if (!document.getElementById('list-view')) {
        const listViewElement = document.createElement('div');
        listViewElement.id = 'list-view';
        listViewElement.classList.add('view-container');
        
        // ‡πÅ‡∏ó‡∏£‡∏Å‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
        const container = document.querySelector('.container') || document.body;
        container.appendChild(listViewElement);
    }
    
    // Get DOM Elements
    const schoolSelector = document.getElementById('school-selector');
    const viewToggle = document.getElementById('view-toggle');
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á dropdowns ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
    populateSchoolSelector();
    
    // Setup event listeners
    if (viewToggle) {
        viewToggle.addEventListener('click', toggleView);
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°
        const toggleText = viewToggle.querySelector('#toggleText');
        if (toggleText) {
            toggleText.textContent = nextViewText;
        }
    }
    
    if (schoolSelector) {
        schoolSelector.addEventListener('change', function(e) {
            selectedSchool = e.target.value;
            currentIndex = 0; // Reset the slideshow index when school changes
            renderView();
        });
    }
    
    // Setup theme toggle
    const themeToggle = document.getElementById("theme-toggle");
    if (themeToggle) {
        themeToggle.addEventListener("change", function () {
            document.body.classList.toggle("dark-mode");
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ renderView ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏î UI ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡∏≤‡∏°‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
            renderView();
            
            // ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å applyDarkModeToElements ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å element ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
            applyDarkModeToElements();
        });
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á theme toggle
        if (document.body.classList.contains('dark-mode')) {
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤ UI ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
            renderView();
            applyDarkModeToElements();
        }
    }
    
    // Initialize the view
    renderView();
    updateViewToggleButton();
});

// Populate school selector
function populateSchoolSelector() {
    const schoolSelector = document.getElementById('school-selector');
    if (!schoolSelector) return;
    
    const schools = [...new Set(certificates.map(cert => cert.school))];
    schoolSelector.innerHTML = '<option value="all">All Schools</option>';
    schools.forEach(school => {
        const option = document.createElement('option');
        option.value = school;
        option.textContent = school;
        schoolSelector.appendChild(option);
    });
}

function toggleView() {
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î view ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    if (currentView === 'gallery') {
        currentView = 'slideshow';
        nextViewText = 'Switch to List View';
    } else if (currentView === 'slideshow') {
        currentView = 'list';
        nextViewText = 'Switch to Gallery View';
    } else {
        currentView = 'gallery';
        nextViewText = 'Switch to Slideshow View';
    }
    
    currentIndex = 0; // Reset the slideshow index when switching views
    renderView();
    updateViewToggleButton();
}

function updateViewToggleButton() {
    const viewToggle = document.getElementById('view-toggle');
    if (!viewToggle) return;
    
    const toggleIcon = viewToggle.querySelector('.toggle-icon');
    const toggleText = document.getElementById('toggleText');
    
    if (!toggleIcon || !toggleText) return;
    
    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏° view ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
    toggleText.textContent = nextViewText;
    
    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó icon ‡∏ï‡∏≤‡∏° view ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
    if (nextViewText.includes('Slideshow')) {
        toggleIcon.className = 'toggle-icon slideshow-icon';
    } else if (nextViewText.includes('List')) {
        toggleIcon.className = 'toggle-icon list-icon';
    } else {
        toggleIcon.className = 'toggle-icon gallery-icon';
    }
}

// Filter certificates by selected school
function getFilteredCertificates() {
    return selectedSchool === 'all' 
        ? certificates 
        : certificates.filter(cert => cert.school === selectedSchool);
}

// Render certificate card
function renderCertificateCard(cert) {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å body class
    const isDarkMode = document.body.classList.contains('dark-mode');
    const darkModeClass = isDarkMode ? 'dark-mode' : '';
    
    return `
        <div class="certificate-card fade-in ${darkModeClass}">
            <img src="${cert.image}" alt="${cert.title}" class="certificate-image" onclick="openGalleryModal('${cert.image}')">
            <div class="certificate-details ${darkModeClass}">
                <h3 class="certificate-title1">${cert.title}</h3>
                <div><a href= "${cert.schoolLink}" class="certificate-school ${darkModeClass}">üè´ : ${cert.school}</a></div>
                
                <details>
                    <summary>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢<span class="text-description">2x click to open just one</span></summary>
                    ${cert.description}
                </details>

                <div class="certificate-links">
                    <a href="${cert.notionLink}" class="certificate-link ${darkModeClass}" target="_blank">
                        <span class="notes-icon">
                                View Notes : <img src="notion.webp" width="20" class="notion-icon">
                                Notion
                        </span>
                    </a>

                    <a href="${cert.costlink}" class="certificate-link ${darkModeClass}"  target="_blank">
                        <span class="cost-icon"> Course Value : ${cert.cost}</span>
                    </a>

                    <a href="${cert.certificateLink}" class="certificate-link ${darkModeClass}" target="_blank">
                        <verify-icon class="${darkModeClass}"><span>Verify Certificate</span></verify-icon>
                    </a>
                </div>
            </div>
        </div>
    `;
}

// Render gallery view
function renderGalleryView() {
    const galleryView = document.getElementById('gallery-view');
    if (!galleryView) return;
    
    const filteredCerts = getFilteredCertificates();
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å body class
    const isDarkMode = document.body.classList.contains('dark-mode');
    const darkModeClass = isDarkMode ? 'dark-mode' : '';
    
    galleryView.innerHTML = `
        <div class="certificate-grid ${darkModeClass}">
            ${filteredCerts.map(cert => renderCertificateCard(cert)).join('')}
        </div>
    `;
    
    // ‡πÅ‡∏™‡∏î‡∏á gallery view ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô views ‡∏≠‡∏∑‡πà‡∏ô
    galleryView.style.display = 'block';
    
    const slideshowView = document.getElementById('slideshow-view');
    if (slideshowView) slideshowView.style.display = 'none';
    
    const listView = document.getElementById('list-view');
    if (listView) listView.style.display = 'none';
    
    // Setup details behavior ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà render view ‡πÉ‡∏´‡∏°‡πà
    setupDetailsElements();
}

// Render slideshow view
function renderSlideshowView() {
    const slideshowView = document.getElementById('slideshow-view');
    if (!slideshowView) return;
    
    const filteredCerts = getFilteredCertificates();
    if (filteredCerts.length > 0) {
        // Ensure currentIndex is valid for the filtered certificates
        if (currentIndex >= filteredCerts.length) {
            currentIndex = 0;
        }
        
        const cert = filteredCerts[currentIndex]; // Display the current certificate in slideshow
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å body class
        const isDarkMode = document.body.classList.contains('dark-mode');
        const darkModeClass = isDarkMode ? 'dark-mode' : '';
        
        slideshowView.innerHTML = `
            <div class="slideshow-container fade-in ${darkModeClass}">
                <div class="slideshow-image">
                    <img src="${cert.image}" alt="${cert.title}">
                    <div class="slideshow-nav">
                        <button class="nav-button prev-button" onclick="previousSlide()">
                            <span class="prev-icon"></span>
                        </button>
                        <button class="nav-button next-button" onclick="nextSlide()">
                            <span class="next-icon"></span>
                        </button>
                    </div>
                </div>
                <div class="slideshow-details ${darkModeClass}">
                    <h2 class="certificate-title1">${cert.title}</h2>
                    <p><a href= "${cert.schoolLink}" class="certificate-school ${darkModeClass}">üè´: ${cert.school}</a></p>
                    <p class="certificate-description">${cert.description}</p>
                    <div class="certificate-links">
                        <a href="${cert.notionLink}" class="certificate-link ${darkModeClass}" target="_blank">
                            <span class="notes-icon">
                                View Notes : <img src="notion.webp" width="20" class="notion-icon">
                                Notion
                            </span>
                        </a>
                        
                        <a href="${cert.costlink}" class="certificate-link ${darkModeClass}"  target="_blank">
                            <span class="cost-icon"> Course Value : ${cert.cost}</span>
                        </a>
                        
                        <a href="${cert.certificateLink}" class="certificate-link ${darkModeClass}" target="_blank">
                            <verify-icon class="${darkModeClass}"><span>Verify Certificate</span></verify-icon>
                        </a>
                    </div>
                </div>
            </div>
        `;
    }
    
    // ‡πÅ‡∏™‡∏î‡∏á slideshow view ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô views ‡∏≠‡∏∑‡πà‡∏ô
    slideshowView.style.display = 'block';
    
    const galleryView = document.getElementById('gallery-view');
    if (galleryView) galleryView.style.display = 'none';
    
    const listView = document.getElementById('list-view');
    if (listView) listView.style.display = 'none';
}

// Render list view
function renderListView() {
    const listView = document.getElementById('list-view');
    if (!listView) return;
    
    const filteredCerts = getFilteredCertificates();
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å body class
    const isDarkMode = document.body.classList.contains('dark-mode');
    const darkModeClass = isDarkMode ? 'dark-mode' : '';
    
    listView.innerHTML = `
        <div class="certificate-list fade-in">
            <table class="list-table ${darkModeClass}">
                <thead>
                    <tr>
                        <th class="${darkModeClass}">Course Title</th>
                        <th class="${darkModeClass}">School</th>
                        <th class="${darkModeClass}">Verify</th>
                    </tr>
                </thead>
                <tbody>
                    ${filteredCerts.map(cert => `
                        <tr class="list-item ${darkModeClass}">
                            <td class="list-title ${darkModeClass}">${cert.title}</td>
                            <td class="list-school ${darkModeClass}"><a href="${cert.schoolLink}" class="certificate-school target="_blank">${cert.school}</a></td>
                            <td><a href="${cert.certificateLink}" target="_blank"><verify-icon>Check</verify-icon></a></td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
    `;
    
    // ‡πÅ‡∏™‡∏î‡∏á list view ‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô views ‡∏≠‡∏∑‡πà‡∏ô
    listView.style.display = 'block';
    
    const galleryView = document.getElementById('gallery-view');
    if (galleryView) galleryView.style.display = 'none';
    
    const slideshowView = document.getElementById('slideshow-view');
    if (slideshowView) slideshowView.style.display = 'none';
}

// Function to setup details elements
function setupDetailsElements() {
    document.querySelectorAll(".certificate-card details").forEach((details) => {
        let clickTimeout = null; // ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Double Click
        let lastClicked = null; // ‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏Å‡∏î Double Click

        details.addEventListener("click", function (event) {
            event.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á <details>

            if (clickTimeout) {
                // üëâ Double Click: ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏î & ‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                clearTimeout(clickTimeout);
                clickTimeout = null;

                document.querySelectorAll(".certificate-card details").forEach((d) => {
                    d.removeAttribute("open");
                });
                details.setAttribute("open", "true");
                lastClicked = details; // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≤‡∏Å Double Click

            } else {
                // ‡∏ï‡∏±‡πâ‡∏á timeout ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Single Click
                clickTimeout = setTimeout(() => {
                    if (lastClicked === details) {
                        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢ Double Click ‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ
                        details.removeAttribute("open");
                        lastClicked = null; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤
                    } else {
                        // üëâ Single Click ‡∏õ‡∏Å‡∏ï‡∏¥: ‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
                        const allAreOpen = [...document.querySelectorAll(".certificate-card details")]
                            .every((d) => d.hasAttribute("open"));

                        if (allAreOpen) {
                            // ‡∏ñ‡πâ‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                            document.querySelectorAll(".certificate-card details").forEach((d) => {
                                d.removeAttribute("open");
                            });
                        } else {
                            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏≠‡∏±‡∏ô‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                            document.querySelectorAll(".certificate-card details").forEach((d) => {
                                d.setAttribute("open", "true");
                            });
                        }
                    }

                    clickTimeout = null;
                }, 300); // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏¢‡∏Å Single / Double Click
            }
        });
    });
}



// Previous slide function for slideshow
function previousSlide() {
    const filteredCerts = getFilteredCertificates();
    currentIndex = (currentIndex > 0) ? currentIndex - 1 : filteredCerts.length - 1;
    renderSlideshowView();
}

// Next slide function for slideshow
function nextSlide() {
    const filteredCerts = getFilteredCertificates();
    currentIndex = (currentIndex < filteredCerts.length - 1) ? currentIndex + 1 : 0;
    renderSlideshowView();
}

// ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô renderView ‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ setTimeout
function renderView() {
    if (currentView === 'gallery') {
        renderGalleryView();
    } else if (currentView === 'slideshow') {
        renderSlideshowView();
    } else {
        renderListView();
    }
    
    // Update active classes for view containers
    const galleryView = document.getElementById('gallery-view');
    const slideshowView = document.getElementById('slideshow-view');
    const listView = document.getElementById('list-view');
    
    if (galleryView) galleryView.classList.toggle('active', currentView === 'gallery');
    if (slideshowView) slideshowView.classList.toggle('active', currentView === 'slideshow');
    if (listView) listView.classList.toggle('active', currentView === 'list');
    
    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å applyDarkModeToElements ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å render
    applyDarkModeToElements();
}

// ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô applyDarkModeToElements ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
function applyDarkModeToElements() {
    const isDarkMode = document.body.classList.contains('dark-mode');
    
    // ‡∏™‡∏£‡πâ‡∏≤‡∏á selectors ‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å element ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
    const selectors = [
        '.certificate-card',
        '.certificate-details', 
        '.slideshow-container', 
        '.slideshow-details', 
        '.list-item', 
        '.list-table', 
        '.certificate-grid', 
        '.gallery-modal', 
        '.modal-content',
        '.certificate-link',
        'verify-icon',
        'th',
        'td',
        '.certificate-school',
        'a.certificate-school'
    ];
    
    // ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ query selector ‡∏£‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó class
    selectors.forEach(selector => {
        document.querySelectorAll(selector).forEach(el => {
            if (isDarkMode) {
                el.classList.add('dark-mode');
            } else {
                el.classList.remove('dark-mode');
            }
        });
    });
}

// Function to open full gallery view
function openGalleryModal(imageSrc) {
    const modal = document.createElement('div');
    modal.classList.add('gallery-modal');
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏´‡∏°‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å body class
    const isDarkMode = document.body.classList.contains('dark-mode');
    if (isDarkMode) {
        modal.classList.add('dark-mode');
    }
    
    modal.innerHTML = `
        <div class="modal-content ${isDarkMode ? 'dark-mode' : ''}">
            <span class="close-modal">&times;</span>
            <img src="${imageSrc}" class="full-image">
        </div>
    `;
    document.body.appendChild(modal);

    // Close modal on click
    modal.querySelector('.close-modal').addEventListener('click', () => {
        modal.remove();
    });

    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.remove();
        }
    });
}

// Make functions globally available for HTML onclick attributes
window.previousSlide = previousSlide;
window.nextSlide = nextSlide;
window.openGalleryModal = openGalleryModal;
window.toggleView = toggleView;
